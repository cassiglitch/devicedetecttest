<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Space Game</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background-color: black;
    }
    #player {
        width: 50px;
        height: 50px;
        background-color: white;
        position: absolute;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
    }
    .enemy {
        width: 30px;
        height: 30px;
        background-color: red;
        position: absolute;
    }
    .bullet {
        width: 5px;
        height: 20px;
        background-color: yellow;
        position: absolute;
    }
</style>
</head>
<body>
<div id="player"></div>
<div id="score">Score: 0</div>
<div id="lives">Lives: 3</div>
<script>
    const player = document.getElementById('player');
    const scoreDisplay = document.getElementById('score');
    const livesDisplay = document.getElementById('lives');
    const enemies = [];
    const bullets = [];
    let score = 0;
    let lives = 3;

    function createEnemy() {
        const enemy = document.createElement('div');
        enemy.classList.add('enemy');
        enemy.style.top = '0';
        enemy.style.left = `${Math.random() * window.innerWidth}px`;
        document.body.appendChild(enemy);
        enemies.push(enemy);
    }

    function moveEnemies() {
        enemies.forEach(enemy => {
            const top = parseInt(enemy.style.top);
            const left = parseInt(enemy.style.left);
            const direction = Math.random() < 0.5 ? -1 : 1;
            const speed = Math.random() * 2 + 1;
            enemy.style.top = `${top + speed}px`;
            enemy.style.left = `${left + direction * speed}px`;
            if (top >= window.innerHeight || left <= 0 || left >= window.innerWidth - enemy.offsetWidth) {
                enemy.remove();
                const index = enemies.indexOf(enemy);
                enemies.splice(index, 1);
                createEnemy();
            }
            if (Math.random() < 0.01) {
                enemyShoot(enemy);
            }
        });
    }

    function enemyShoot(enemy) {
        const bullet = document.createElement('div');
        bullet.classList.add('bullet');
        const enemyRect = enemy.getBoundingClientRect();
        bullet.style.top = `${enemyRect.bottom}px`;
        bullet.style.left = `${enemyRect.left + enemy.offsetWidth / 2 - 2.5}px`;
        document.body.appendChild(bullet);
        bullets.push(bullet);
    }

    function createCentipede() {
        const centipede = document.createElement('div');
        centipede.classList.add('enemy');
        centipede.style.width = '200px';
        centipede.style.height = '30px';
        centipede.style.backgroundColor = 'green';
        centipede.style.position = 'absolute';
        centipede.style.top = '0';
        centipede.style.left = `${Math.random() * window.innerWidth}px`;
        document.body.appendChild(centipede);
        enemies.push(centipede);
    }

    function movePlayer(event) {
        const key = event.keyCode;
        const left = parseInt(player.style.left);
        if (key === 37 && left > 0) {
            player.style.left = `${left - 10}px`;
        } else if (key === 39 && left < window.innerWidth - player.offsetWidth) {
            player.style.left = `${left + 10}px`;
        }
    }

    function shoot() {
        const bullet = document.createElement('div');
        bullet.classList.add('bullet');
        const playerRect = player.getBoundingClientRect();
        bullet.style.top = `${playerRect.top}px`;
        bullet.style.left = `${playerRect.left + player.offsetWidth / 2 - 2.5}px`;
        document.body.appendChild(bullet);
        bullets.push(bullet);
    }

    function moveBullets() {
        bullets.forEach(bullet => {
            const top = parseInt(bullet.style.top);
            if (top <= 0) {
                bullet.remove();
                const index = bullets.indexOf(bullet);
                bullets.splice(index, 1);
            } else {
                bullet.style.top = `${top - 5}px`;
            }
        });
    }

    function checkCollisions() {
        bullets.forEach(bullet => {
            const bulletRect = bullet.getBoundingClientRect();
            enemies.forEach(enemy => {
                const enemyRect = enemy.getBoundingClientRect();
                if (
                    bulletRect.top <= enemyRect.bottom &&
                    bulletRect.bottom >= enemyRect.top &&
                    bulletRect.left <= enemyRect.right &&
                    bulletRect.right >= enemyRect.left
                ) {
                    bullet.remove();
                    const bulletIndex = bullets.indexOf(bullet);
                    bullets.splice(bulletIndex, 1);
                    enemy.remove();
                    const enemyIndex = enemies.indexOf(enemy);
                    enemies.splice(enemyIndex, 1);
                    if (enemy.classList.contains('centipede')) {
                        splitCentipede(enemy);
                    }
                    score += 10;
                    scoreDisplay.textContent = `Score: ${score}`;
                }
            });
        });

        enemies.forEach(enemy => {
            const enemyRect = enemy.getBoundingClientRect();
            const playerRect = player.getBoundingClientRect();
            if (
                playerRect.top <= enemyRect.bottom &&
                playerRect.bottom >= enemyRect.top &&
                playerRect.left <= enemyRect.right &&
                playerRect.right >= enemyRect.left
            ) {
                enemy.remove();
                const enemyIndex = enemies.indexOf(enemy);
                enemies.splice(enemyIndex, 1);
                lives--;
                livesDisplay.textContent = `Lives: ${lives}`;
                if (lives <= 0) {
                    gameOver();
                }
            }
        });
    }

    function splitCentipede(centipede) {
        const centipedeRect = centipede.getBoundingClientRect();
        const leftSegment = document.createElement('div');
        leftSegment.classList.add('enemy');
        leftSegment.style.width = `${centipedeRect.width / 2}px`;
        leftSegment.style.height = '30px';
        leftSegment.style.backgroundColor = 'green';
        leftSegment.style.position = 'absolute';
        leftSegment.style.top = `${centipedeRect.top}px`;
        leftSegment.style.left = `${centipedeRect.left}px`;
        document.body.appendChild(leftSegment);
        enemies.push(leftSegment);
        const rightSegment = document.createElement('div');
        rightSegment.classList.add('enemy');
        rightSegment.style.width = `${centipedeRect.width / 2}px`;
        rightSegment.style.height = '30px';
        rightSegment.style.backgroundColor = 'green';
        rightSegment.style.position = 'absolute';
        rightSegment.style.top = `${centipedeRect.top}px`;
        rightSegment.style.left = `${centipedeRect.left + centipedeRect.width / 2}px`;
        document.body.appendChild(rightSegment);
        enemies.push(rightSegment);
    }

    function gameOver() {
        alert('Game Over! Your score: ' + score);
        location.reload(); // Reload the page to restart the game
    }

    function gameLoop() {
        moveEnemies();
        moveBullets();
        checkCollisions();
        requestAnimationFrame(gameLoop);
    }

    document.addEventListener('keydown', movePlayer);
    document.addEventListener('keydown', (event) => {
        if (event.code === 'Space') {
            shoot();
        }
    });

    createEnemy();
    createCentipede();
    gameLoop();
</script>
</body>
</html>
